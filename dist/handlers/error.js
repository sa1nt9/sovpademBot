"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.errorHandler=void 0;const errorHandler=e=>{var r,o,i,d,a,n,s,l,u,t;const{ctx:c}=e,v=String(null===(r=c.from)||void 0===r?void 0:r.id),g=null===(o=c.from)||void 0===o?void 0:o.username,_=e.error instanceof Error?{name:e.error.name,message:e.error.message,stack:e.error.stack}:{name:"Unknown Error",message:String(e.error),stack:void 0},p=c.update.message?"message":c.update.callback_query?"callback_query":c.update.inline_query?"inline_query":"unknown";c.logger.error({error:_,update:{update_id:c.update.update_id,update_type:p,chat_id:null===(i=c.chat)||void 0===i?void 0:i.id,message_id:null===(d=c.message)||void 0===d?void 0:d.message_id,callback_query_id:null===(a=c.callbackQuery)||void 0===a?void 0:a.id,inline_query_id:null===(n=c.inlineQuery)||void 0===n?void 0:n.id},user:{id:v,username:g,language_code:null===(s=c.from)||void 0===s?void 0:s.language_code},session:{step:null===(l=c.session)||void 0===l?void 0:l.step,activeProfile:null===(t=null===(u=c.session)||void 0===u?void 0:u.activeProfile)||void 0===t?void 0:t.id}},"Error occurred during update processing")};exports.errorHandler=errorHandler;