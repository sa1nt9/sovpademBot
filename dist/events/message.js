"use strict";var __awaiter=this&&this.__awaiter||function(e,s,t,o){return new(t||(t=Promise))((function(i,_){function r(e){try{n(o.next(e))}catch(e){_(e)}}function a(e){try{n(o.throw(e))}catch(e){_(e)}}function n(e){var s;e.done?i(e.value):(s=e.value,s instanceof t?s:new t((function(e){e(s)}))).then(r,a)}n((o=o.apply(e,s||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.messageEvent=messageEvent;const accept_privacy_1=require("../messages/accept_privacy"),add_private_note_1=require("../messages/add_private_note"),blacklist_user_1=require("../messages/blacklist_user"),cannot_send_complain_1=require("../messages/cannot_send_complain"),choose_language_1=require("../messages/choose_language"),choose_language_start_1=require("../messages/choose_language_start"),complain_1=require("../messages/complain"),complain_text_1=require("../messages/complain_text"),continue_see_forms_1=require("../messages/continue_see_forms"),continue_see_likes_forms_1=require("../messages/continue_see_likes_forms"),create_profile_subtype_1=require("../messages/create_profile_subtype"),create_profile_type_1=require("../messages/create_profile_type"),disable_form_1=require("../messages/disable_form"),form_disabled_1=require("../messages/form_disabled"),friends_1=require("../messages/friends"),go_main_menu_1=require("../messages/go_main_menu"),options_to_user_1=require("../messages/options_to_user"),prepare_message_1=require("../messages/prepare_message"),profile_1=require("../messages/profile"),index_1=require("../messages/questions/index"),roulette_searching_1=require("../messages/roulette_searching"),roulette_start_1=require("../messages/roulette_start"),search_people_1=require("../messages/search_people"),search_people_with_likes_1=require("../messages/search_people_with_likes"),sleep_menu_1=require("../messages/sleep_menu"),somebodys_liked_you_1=require("../messages/somebodys_liked_you"),start_using_bot_1=require("../messages/start_using_bot"),switch_profile_1=require("../messages/switch_profile"),text_or_video_to_user_1=require("../messages/text_or_video_to_user"),you_already_have_this_profile_1=require("../messages/you_already_have_this_profile"),you_dont_have_form_1=require("../messages/you_dont_have_form");function messageEvent(e){return __awaiter(this,void 0,void 0,(function*(){var s,t,o,i,_;e.logger.info({userId:null===(s=e.from)||void 0===s?void 0:s.id,username:null===(t=e.from)||void 0===t?void 0:t.username,step:e.session.step,messageType:(null===(o=e.message)||void 0===o?void 0:o.text)?"text":(null===(i=e.message)||void 0===i?void 0:i.photo)?"photo":"other"},"Processing message event"),"choose_language_start"===e.session.step?yield(0,choose_language_start_1.chooseLanguageStartStep)(e):"choose_language"===e.session.step?yield(0,choose_language_1.chooseLanguageStep)(e):"prepare_message"===e.session.step?yield(0,prepare_message_1.prepareMessageStep)(e):"accept_privacy"===e.session.step?yield(0,accept_privacy_1.acceptPrivacyStep)(e):"questions"===e.session.step?yield(0,index_1.questionsStep)(e):"profile"===e.session.step?yield(0,profile_1.profileStep)(e):"sleep_menu"===e.session.step?yield(0,sleep_menu_1.sleepMenuStep)(e):"friends"===e.session.step?yield(0,friends_1.friendsStep)(e):"disable_form"===e.session.step?yield(0,disable_form_1.disableFormStep)(e):"form_disabled"===e.session.step?yield(0,form_disabled_1.formDisabledStep)(e):"you_dont_have_form"===e.session.step?yield(0,you_dont_have_form_1.youDontHaveFormStep)(e):"cannot_send_complain"===e.session.step?yield(0,cannot_send_complain_1.cannotSendComplainStep)(e):"search_people"===e.session.step?yield(0,search_people_1.searchPeopleStep)(e):"search_people_with_likes"===e.session.step?yield(0,search_people_with_likes_1.searchPeopleWithLikesStep)(e):"continue_see_forms"===e.session.step?yield(0,continue_see_forms_1.continueSeeFormsStep)(e):"continue_see_likes_forms"===e.session.step?yield(0,continue_see_likes_forms_1.continueSeeLikesFormsStep)(e):"text_or_video_to_user"===e.session.step?yield(0,text_or_video_to_user_1.textOrVideoToUserStep)(e):"add_private_note"===e.session.step?yield(0,add_private_note_1.addPrivateNoteStep)(e):"added_private_note"===e.session.step?yield(0,text_or_video_to_user_1.textOrVideoToUserStep)(e):"somebodys_liked_you"===e.session.step?yield(0,somebodys_liked_you_1.somebodysLikedYouStep)(e):"complain"===e.session.step?yield(0,complain_1.complainStep)(e):"complain_text"===e.session.step?yield(0,complain_text_1.complainTextStep)(e):"roulette_searching"===e.session.step?yield(0,roulette_searching_1.rouletteSearchingStep)(e):"roulette_start"===e.session.step?yield(0,roulette_start_1.rouletteStartStep)(e):"options_to_user"===e.session.step?yield(0,options_to_user_1.optionsToUserStep)(e):"blacklist_user"===e.session.step?yield(0,blacklist_user_1.blacklistUserStep)(e):"go_main_menu"===e.session.step?yield(0,go_main_menu_1.goMainMenuStep)(e):"start_using_bot"===e.session.step?yield(0,start_using_bot_1.startUsingBotStep)(e):"create_profile_type"===e.session.step?yield(0,create_profile_type_1.createProfileTypeStep)(e):"create_profile_subtype"===e.session.step?yield(0,create_profile_subtype_1.createProfileSubtypeStep)(e):"switch_profile"===e.session.step?yield(0,switch_profile_1.switchProfileStep)(e):"you_already_have_this_profile"===e.session.step?yield(0,you_already_have_this_profile_1.youAlreadyHaveThisProfileStep)(e):(e.logger.warn({userId:null===(_=e.from)||void 0===_?void 0:_.id,step:e.session.step},"Unknown step encountered"),yield e.reply(e.t("no_such_answer")))}))}