"use strict";var __awaiter=this&&this.__awaiter||function(e,n,r,i){return new(r||(r=Promise))((function(t,o){function s(e){try{a(i.next(e))}catch(e){o(e)}}function d(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,d)}a((i=i.apply(e,n||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.genderQuestion=void 0;const keyboards_1=require("../../constants/keyboards"),genderQuestion=e=>__awaiter(void 0,void 0,void 0,(function*(){var n,r;const i=e.message.text,t=String(e.from.id);if(e.logger.info({userId:t,question:"gender",input:i,profileType:null===(n=e.session.activeProfile)||void 0===n?void 0:n.profileType},"User answering gender question"),null===(r=(0,keyboards_1.genderKeyboard)(e.t))||void 0===r?void 0:r.keyboard[0].includes(i||"")){const n=i===e.t("i_man")?"male":"female";e.logger.info({userId:t,gender:n},"User gender selection validated and saved"),e.session.question="interested_in",e.session.activeProfile.gender=n,yield e.reply(e.t("interested_in_question"),{reply_markup:(0,keyboards_1.interestedInKeyboard)(e.t)})}else e.logger.warn({userId:t,invalidInput:i},"User provided invalid gender option"),yield e.reply(e.t("no_such_answer"),{reply_markup:(0,keyboards_1.genderKeyboard)(e.t)})}));exports.genderQuestion=genderQuestion;