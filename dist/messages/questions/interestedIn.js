"use strict";var __awaiter=this&&this.__awaiter||function(e,n,t,i){return new(t||(t=Promise))((function(r,o){function s(e){try{a(i.next(e))}catch(e){o(e)}}function d(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,d)}a((i=i.apply(e,n||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.interestedInQuestion=void 0;const keyboards_1=require("../../constants/keyboards"),interestedInQuestion=e=>__awaiter(void 0,void 0,void 0,(function*(){var n,t;const i=e.message.text,r=String(e.from.id);if(e.logger.info({userId:r,question:"interested_in",input:i,profileType:null===(n=e.session.activeProfile)||void 0===n?void 0:n.profileType},"User answering interested in question"),null===(t=(0,keyboards_1.interestedInKeyboard)(e.t))||void 0===t?void 0:t.keyboard[0].includes(i||"")){const n=i===e.t("men")?"male":i===e.t("women")?"female":"all";e.logger.info({userId:r,interestedIn:n},"User preference validated and saved"),e.session.question="city",e.session.activeProfile.interestedIn=n,yield e.reply(e.t("city_question"),{reply_markup:(0,keyboards_1.cityKeyboard)(e.t,e.session)})}else e.logger.warn({userId:r,invalidInput:i},"User provided invalid preference option"),yield e.reply(e.t("no_such_answer"),{reply_markup:(0,keyboards_1.interestedInKeyboard)(e.t)})}));exports.interestedInQuestion=interestedInQuestion;