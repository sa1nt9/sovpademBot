"use strict";var __awaiter=this&&this.__awaiter||function(e,r,o,s){return new(o||(o=Promise))((function(a,t){function n(e){try{d(s.next(e))}catch(e){t(e)}}function i(e){try{d(s.throw(e))}catch(e){t(e)}}function d(e){var r;e.done?a(e.value):(r=e.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,i)}d((s=s.apply(e,r||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.yearsQuestion=void 0;const keyboards_1=require("../../constants/keyboards"),keyboards_2=require("../../constants/keyboards"),yearsQuestion=e=>__awaiter(void 0,void 0,void 0,(function*(){var r;const o=e.message.text,s=String(e.from.id);e.logger.info({userId:s,question:"years",input:o,profileType:null===(r=e.session.activeProfile)||void 0===r?void 0:r.profileType},"User answering age question");const a=Number(o);/^\d+$/.test(o||"str")?a<=8?(e.logger.warn({userId:s,age:a},"User provided age too low"),yield e.reply(e.t("type_bigger_year"),{reply_markup:(0,keyboards_2.ageKeyboard)(e.session)})):a>100?(e.logger.warn({userId:s,age:a},"User provided age too high"),yield e.reply(e.t("type_smaller_year"),{reply_markup:(0,keyboards_2.ageKeyboard)(e.session)})):(e.logger.info({userId:s,age:a},"User age validated and saved"),e.session.activeProfile.age=a,e.session.question="gender",yield e.reply(e.t("gender_question"),{reply_markup:(0,keyboards_1.genderKeyboard)(e.t)})):(e.logger.warn({userId:s,invalidInput:o},"User provided non-numeric age"),yield e.reply(e.t("type_years"),{reply_markup:(0,keyboards_2.ageKeyboard)(e.session)}))}));exports.yearsQuestion=yearsQuestion;