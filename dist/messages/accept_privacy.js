"use strict";var __awaiter=this&&this.__awaiter||function(e,r,t,i){return new(t||(t=Promise))((function(o,a){function c(e){try{s(i.next(e))}catch(e){a(e)}}function n(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(c,n)}s((i=i.apply(e,r||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.acceptPrivacyStep=acceptPrivacyStep;const keyboards_1=require("../constants/keyboards");function acceptPrivacyStep(e){return __awaiter(this,void 0,void 0,(function*(){const r=e.message.text,t=String(e.from.id);e.logger.info({userId:t,step:"accept_privacy"},"User responding to privacy agreement"),r===e.t("ok")?(e.logger.info({userId:t},"User accepted privacy policy"),e.session.privacyAccepted=!0,e.session.step="create_profile_type",e.session.isCreatingProfile=!0,yield e.reply(e.t("profile_type_title"),{reply_markup:(0,keyboards_1.createProfileTypeKeyboard)(e.t)})):(e.logger.warn({userId:t,message:r},"User provided invalid response to privacy policy"),yield e.reply(e.t("no_such_answer"),{reply_markup:(0,keyboards_1.acceptPrivacyKeyboard)(e.t)}))}))}