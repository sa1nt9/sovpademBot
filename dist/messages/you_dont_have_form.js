"use strict";var __awaiter=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))((function(i,a){function n(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var r;e.done?i(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(n,s)}c((o=o.apply(e,r||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.youDontHaveFormStep=youDontHaveFormStep;const keyboards_1=require("../constants/keyboards");function youDontHaveFormStep(e){return __awaiter(this,void 0,void 0,(function*(){const r=e.message.text,t=String(e.from.id);e.logger.info({userId:t,step:"you_dont_have_form"},"User trying to use feature without having a profile"),r===e.t("create_form")?(e.logger.info({userId:t},"User decided to create profile"),e.session.privacyAccepted?(e.logger.info({userId:t,privacyAccepted:!0},"Privacy already accepted, proceeding to profile type selection"),e.session.step="create_profile_type",e.session.isCreatingProfile=!0,yield e.reply(e.t("profile_type_title"),{reply_markup:(0,keyboards_1.createProfileTypeKeyboard)(e.t)})):(e.logger.info({userId:t,privacyAccepted:!1},"Privacy not accepted, redirecting to privacy agreement"),e.session.step="accept_privacy",yield e.reply(e.t("privacy_message"),{reply_markup:(0,keyboards_1.acceptPrivacyKeyboard)(e.t)}))):(e.logger.warn({userId:t,invalidOption:r},"User provided invalid response on no-form screen"),yield e.reply(e.t("no_such_answer"),{reply_markup:(0,keyboards_1.notHaveFormToDeactiveKeyboard)(e.t)}))}))}