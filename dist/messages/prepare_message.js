"use strict";var __awaiter=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function a(e){try{p(n.next(e))}catch(e){o(e)}}function i(e){try{p(n.throw(e))}catch(e){o(e)}}function p(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}p((n=n.apply(e,r||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareMessageStep=prepareMessageStep;const keyboards_1=require("../constants/keyboards");function prepareMessageStep(e){return __awaiter(this,void 0,void 0,(function*(){const r=e.message.text,t=String(e.from.id);e.logger.info({userId:t,step:"prepare_message"},"User on introduction screen"),r===e.t("ok_lets_start")?(e.logger.info({userId:t},"User confirming start of onboarding process"),e.session.step="accept_privacy",yield e.reply(e.t("privacy_message"),{reply_markup:(0,keyboards_1.acceptPrivacyKeyboard)(e.t)})):(e.logger.warn({userId:t,invalidOption:r},"User provided invalid response on introduction screen"),yield e.reply(e.t("no_such_answer"),{reply_markup:(0,keyboards_1.prepareMessageKeyboard)(e.t)}))}))}