"use strict";var __awaiter=this&&this.__awaiter||function(e,r,i,t){return new(i||(i=Promise))((function(o,s){function n(e){try{c(t.next(e))}catch(e){s(e)}}function a(e){try{c(t.throw(e))}catch(e){s(e)}}function c(e){var r;e.done?o(e.value):(r=e.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}c((t=t.apply(e,r||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.startSearchingPeople=startSearchingPeople;const keyboards_1=require("../constants/keyboards"),profilesService_1=require("./db/profilesService");function startSearchingPeople(e){return __awaiter(this,arguments,void 0,(function*(e,r={}){var i;const t=String(null===(i=e.from)||void 0===i?void 0:i.id);e.logger.info({userId:t,setActive:r.setActive},"Starting people search"),e.session.step="search_people",yield e.reply("‚ú®üîç",{reply_markup:(0,keyboards_1.answerFormKeyboard)()}),r.setActive&&(yield(0,profilesService_1.toggleProfileActive)(t,e.session.activeProfile.profileType,!0,"RELATIONSHIP"!==e.session.activeProfile.profileType?e.session.activeProfile.subType:void 0),e.logger.info({userId:t},"Profile activated for search"))}))}