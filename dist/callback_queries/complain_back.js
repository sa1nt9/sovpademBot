"use strict";var __awaiter=this&&this.__awaiter||function(e,a,r,o){return new(r||(r=Promise))((function(t,i){function c(e){try{l(o.next(e))}catch(e){i(e)}}function n(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var a;e.done?t(e.value):(a=e.value,a instanceof r?a:new r((function(e){e(a)}))).then(c,n)}l((o=o.apply(e,a||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.complainBackCallbackQuery=void 0;const keyboards_1=require("../constants/keyboards"),logger_1=require("../logger"),complainBackCallbackQuery=e=>__awaiter(void 0,void 0,void 0,(function*(){var a,r;const o=e.callbackQuery.data.split(":")[1];try{(null===(a=e.callbackQuery)||void 0===a?void 0:a.message)&&e.session.originalReactionMessage&&(yield e.api.editMessageText(e.callbackQuery.message.chat.id,e.callbackQuery.message.message_id,e.session.originalReactionMessage.text,{reply_markup:(0,keyboards_1.rouletteReactionKeyboard)(e.t,o)})),logger_1.logger.info({userId:null===(r=e.from)||void 0===r?void 0:r.id},"User returned from complaint"),yield e.answerCallbackQuery()}catch(a){e.logger.error({error:a,action:"Error handling complain back button",targetUserId:o}),yield e.answerCallbackQuery({text:e.t("error_occurred"),show_alert:!0})}}));exports.complainBackCallbackQuery=complainBackCallbackQuery;